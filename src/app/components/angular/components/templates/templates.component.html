<h2 class="red-yellow-txt">Templates</h2>

<p>En Angular, il y a 2 fa√ßons principales d'exploiter une donn√©e venant du TypeScript dans le Template.</p>
<ul>
  <li class="red-yellow-txt">String interpolation</li>
  <li class="red-yellow-txt">Attribute binding</li>
</ul>

<p>Pour initialiser les propri√©t√©s en suivant les "best practices Angular", on utilise la m√©thode <code class="code-inline"> ngOnInit() </code>.</p>
<p>Pour l'utiliser, il faut impl√©menter l'<span class="red-yellow-txt">interface OnInit</span></p>

<pre>
  <span class="label">TypeScript</span>
  <code class="language-typescript">
    import &#123; Component, OnInit} from '@angular/core';

    @Component(&#123;
        selector: 'app-post',
        templateUrl: './post.component.html',
        styleUrls: ['./post.component.scss']
    })
    export class PostComponent implements OnInit &#123;

      // Propri√©t√©s
      // On cr√©e un attribut de class en associant le nom de l'attribut √† son type
      // ! => bang : non-null assertion operator = signify que l'op√©rande est non nul et non ind√©fini
      // L'op√©ration x! produit une valeur du type de x avec null et undefined exclus
      public title!: string;
      public description!:string;
      public createdDate!: Date;
      public like!: number;

      ngOnInit() &#123;
        this.title = 'Chippie';
        this.description = 'encore en train de dormir ...';
        this.createdDate = new Date();
        this.like = 6;
      }
    }
    </code>
</pre>

<div class="definition">
  <i class="fa-solid fa-circle-info red-yellow-txt"></i>
  <p>La m√©thode <code class="code-inline"> ngOnInit() </code> est appel√©e automatiquement par Angular au moment de la <span class="red-yellow-txt">cr√©ation de chaque instance</span> du composant.</p>
  <p>Elle permet d'initialiser des propri√©t√©s</p>
</div>

<h3 class="red-yellow-txt">Afficher des valeurs avec l'interpolation</h3>
<pre>
  <span class="label">HTML</span>
  <code class="language-html">
    <span>{{</span> title }}
    <span><</span>img src ="<span>{{</span> imageUrl }}" alt="<span>{{</span> title }}">
  </code>
</pre>

<h3 class="red-yellow-txt">Afficher des valeurs avec la liaison par attribut (attribut binding)</h3>
<p>Pr√©f√©rable si la propri√©t√© n'est pas un string (number)</p>

<pre>
  <span class="label">HTML</span>
  <code class="language-html">
    <span><</span>img [src]="imageUrl" [alt]="title">
  </code>
</pre>

<h3 class="red-yellow-txt">R√©agir aux √©v√®nement (Template statements)</h3>

<p>Ce sont des m√©thodes ou propri√©t√©s que l'on utilise dans le HTML pour r√©pondre √† un √©v√®nement.</p>
<pre>
  <span class="label">HTML</span>
  <code class="language-html">
    (event)="statement()"
    <span><</span>button (click)="onLike()">like<span><</span>/button>
  </code>
</pre>

<pre>
  <span class="label">TS</span>
  <code class="language-typescript">
    onLike() <span>&lbrace;</span>
      if(this.liked === false) <span>&lbrace;</span>
        this.like++
        this.liked = true
      } else <span>&lbrace;</span>
        this.like--
        this.liked = false
      }
    }
  </code>
</pre>
<p>Le nom de la m√©thode qui commence par <span class="red">on</span> signale qu'elle r√©pond √† un <span class="red">√©v√®nement</span></p>

<p>Quand l'utilisateur click sur le bouton, Angular appelle la m√©thode <code class="code-inline"> onLike() </code> dans la class du composant.</p>

<div class="definition">
  <p>La r√©ponse aux √©v√®nements est un aspect du flux de donn√©es unidirectionnel d'Angular.</p>
</div>

<h3 class="red-yellow-txt">Envoyer des donn√©es √† un component enfant</h3>

<p>Angular permet d'ajouter des <span class="red">propri√©t√©s personnalis√©es</span> aux components de mani√®re √† pouvoir les injecter <span class="red">depuis le component parent</span>.</p>

<p>Cr√©er un type personnalis√© sous forme de classe : </p>

<pre>
  <label class="label">TS</label>
  <code class="language-typescript">
    // Cr√©er un dossier models, et un fichier "mon-type.model.ts"
    export class PostModel &#123;
      constructor(
        public title:string,
        public profilPicture:string,
        public author:string,
        public description:string,
        public createdDate:Date,
        public img:string,
        public like:number
      ) &#123;}
}
  </code>
</pre>
<p>Le <span class="red">d√©corateur </span> <code class="code-inline"> @Input() </code> dans un component ou une directive enfant signifie que la propri√©t√© peut recevoir sa valeur depuis son component parent.</p>
<p>Pour utiliser <code class="code-inline"> @Input() </code>, il faut configurer le parent et l'enfant.</p>
<h4 class="red-yellow-txt">Configurer le component enfant : </h4>
<pre>
  <label class="file-name">üìÑ enfant.component.ts</label>
  <code class="language-typescript">
    // Importer Input
    import &#123;Component, Input, OnInit} from '@angular/core';
    import &#123;PostModel} from "../../models/post.model";

    export class PostComponent implements OnInit &#123;
      // Ajouter @Input √† la propri√©t√©
      @Input() post!: PostModel;
    }
  </code>
</pre>
<h4 class="red-yellow-txt">Configurer le component parent : </h4>
<pre>
  <label class="file-name">üìÑ parent.component.html</label>
  <code class="language-html">
    // Utiliser le selecteur enfant et la propri√©t√© de binding
    &lt;app-post [post] = "post1">&lt;/app-post>
  </code>
</pre>
<pre>
  <label class="file-name">üìÑ app.component.ts</label>
  <code class="language-typescript">
    public post1!:PostModel

    // Dans le component parent, assigner une valeur au component parent.
    this.post1 = new PostModel(
    'mon titre',
    new Date(),
    6,
  )
  </code>
</pre>
